<?xml version="1.0" encoding="UTF-8" ?>
<!-- DTD선언 태그정보와 문서정보 mapper파일-->
<!DOCTYPE mapper
 PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
 "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
 
<mapper namespace="zone">
	<!-- zone은 city별로 조회해야 한다 -->
	<select id="list" parameterType="int" resultType="zone">
		select * from zone where city_no = #{city_no}
	</select>
	
	<!-- 
		resultMap 설정
		- resultType은 반환되는 데이터의 자료형을 설정
		- resultMap은 반환되는 데이터의 매핑(연결)을 설정
			-ex : city_no를 no에 넣어라
			- 복잡한 데이터(계층형)에 대한 처리도 설정할 수 있음
		id는 부르기 위한 것 짓기나름
		type : 적용할 데이터 경로 (데이터 넣을 엔티티)
		- id : 호출할 때 사용할 식별자
		result-column : 데이터베이스 컬럼(열 이름)
		result-property : 설정될 변수 이름
	 -->
	<resultMap type="com.kh.spring12.entity.CityWithZone" id="cityData">
	<!--  city_no 컬럼의 데이터를 city_no 변수에 넣으세요 -->
	<!-- jdbctype varchar.. // javaType->string -->
		<result column="city_no" property="city_no" />
		<result column="city_name" property="city_name" />
		<!--  lsit는 현재는 데이터 설정할 수 없으니 구문을 알려줄테니 찾아서 실행해서 넣으세요 -->
		<!--  
			java.util.List 형태(javaType)이며
			내용물(제네릭 ofType)로 zone을 가지고 있는
			list라는 변수(CityWithZone에있는)(property) 에다가 city_no라는 항목(column)값을 이용해서
			zoneList라는 구문을 실행하세요
		-->
		<collection property="list" column="city_no" 
		javaType="java.util.List" ofType="com.kh.spring12.entity.Zone"
		select="zoneList">
		<!-- select= "zone.list" 로도 부를 수 있다. -->
		
		</collection>
	</resultMap>	
	
	<select id="list3" resultMap="cityData">
		select * from city
	</select>
	
	<select id="zoneList" parameterType="int" resultType="zone">
		select * from zone where city_no = #{city_no}
	</select>
	
</mapper>