<?xml version="1.0" encoding="UTF-8" ?>
<!-- DTD선언 태그정보와 문서정보 mapper파일-->
<!DOCTYPE mapper
 PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
 "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
 
 <!--
 	 mapper 라는 영역안에 구문을 작성한다.
 	 namespace : mapper간의 충돌을 방지 하기 위한 이름 :: 모든 매퍼들이 겹치면 안된다.
  -->
<mapper namespace="cert">
	<!-- 
		1. 인증번호 등록 및 갱신
		2. 인증번호 확인
	 -->
	 <insert id="add" parameterType="cert">
	 <!-- 
	 	merge into cert : cert에 상황에 따라 다른 작업을 수챙(CUD) //등록 수정
	 	using dual : 추가로 살펴봐야할 테이블은 없다(있으면 dual 자리에 작성) cert 이외에 테이블을 봐야할 경우 추가
	 	on(who = #{who}) : who 항목중에 직므 넣으려는 회원이 있다면
	 	when matched then : 있다면
	 	when not matched then : 없다면
	  -->
	 	merge into cert 
	 	using dual
	 	on(who = #{who})
	 	when matched then
	 		update set what=#{what}, when= sysdate where who =#{who}
	 	when not matched then
	 		insert values(#{who}, #{what}, sysdate)
	 </insert>
</mapper>